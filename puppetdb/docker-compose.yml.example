# docker-compose.yml for PuppetDB
# e.g. /opt/containers/puppet/docker-compose.yml
puppetdb:
  image: puppetdb:pc1
  environment:
    PUPPETSERVER_HOSTNAME: puppet.example.com
    PUPPETSERVER_GENCONFIG: yes
    PUPPETDB_SERVER: "db"
    PUPPETDB_DATABASE: "puppetdb"
    PUPPETDB_PASSWORD: "puppetdb"
  expose:
    - 8081
  volumes:
    - "FIXME"
  links:
    - db
  restart: always
db:
  image: postgres:9.5
  environment:
    POSTGRES_USER: "puppetdb"
    POSTGRES_PASSWORD: "puppetdb"
  expose:
    - 5432
  volumes:
    - /opt/containers/puppet/data/db:/var/lib/postgresql/data
  restart: always
